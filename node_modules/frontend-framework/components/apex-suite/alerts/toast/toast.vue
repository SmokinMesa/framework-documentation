<template>
    <transition 
        name="alert-toast" 
        appear
    >
        <div 
            v-if="$store.state.isVisible.alertToast"
            :class="componentName"
            @hover="timerPause()"
        >
            <slot>
            </slot>

            <span 
                class="close"
                @click="alertClose()"
                aria-label="Close this notification"
            >
                <span hidden>Manually close this notification</span>

                <icon-close />
            </span>
        </div>
    </transition>
</template>




<script>
    export default {
        name: 'Toast',
        props: {
            componentName: {
                default: 'toast',
                type: String
            },
            defaultTime: {
                default: 4000,
                type: Number
            },
        },
        data() {
            return { 
                timerActivated: true,
            }
        },
        mounted () {
            this.autoClose();
        },
        methods: {
            alertClose() {
                this.$store.commit('activeAlert', false);
            },
            autoClose() {
                if (this.timerActivated) {
                    var that = this;

                    this.interval = setTimeout(() => {
                       that.alertClose();
                    },that.defaultTime);
                }
            },
            timerPause() {
                this.timerActivated = false;
                
                clearInterval(this.interval);
            },
        }
    }
</script>
