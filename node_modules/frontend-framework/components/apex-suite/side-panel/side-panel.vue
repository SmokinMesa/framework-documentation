<template>
	<transition name="side-panel">
		<div
			:class="{ 'active' : isActive }"
			class="side-panel"
		>
			<button
				class="no-style tab"
				@click="toggleVisible('modalSide')"
			>
				{{ tabName }}
			</button>

			<section class="side-panel-content">
				<span
					class="no-style close"
					@click="toggleVisible('modalSide')"
					aria-label="Close this modal"
				>
					<span hidden>Close side modal</span>

					<icon-close />
				</span>

				<h1 class="heading">
					{{ tabName }}
				</h1>

				<slot>
				</slot>
			</section>
		</div>
	</transition>
</template>




<script>
	export default {
		name: "SidePanel",
		props: {
			componentName: {
				type: String,
				default: "side-panel"
			},
			tabName: {
				type: String,
				default: null
			}
		},
		data() {
			return {
				isActive: false,
			}
		},
		mounted() {
			this.toggleBodyScroll();

			this.$nextTick(()=> {
				window.addEventListener('resize', this.toggleBodyScroll);
			});
		},
		methods: {
			toggleVisible() {
				this.isActive =! this.isActive;

				this.toggleBodyScroll();
			},
			toggleBodyScroll() {
				//  note, have to detect resolution as layout switches on some device rotation
				if (this.isActive && this.$store.state.windowWidth < 1100) {
					document.body.classList.add('no-scroll');
				} else if (!this.isActive && this.$store.state.windowWidth < 1100) {
					document.body.classList.remove('no-scroll');
				} else if (this.$store.state.windowWidth > 1100) {
					document.body.classList.remove('no-scroll');
				}
			}
		},
	}
</script>