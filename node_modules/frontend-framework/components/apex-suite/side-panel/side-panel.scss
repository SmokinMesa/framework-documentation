/*
    title:  side-panel
    author: rob@nexuspoint.co.uk
    notes:

======================================================================================================================================================================================================== */




//  component wrapper
//  ====================================================================================================
@mixin side-panel(
    $componentName: "side-panel",
) {
    .#{$componentName} {
        $switch-point: $break-large;
        
        //  don't show this on "standard" view   
        .close,
        .heading {
            display: none;
        }

        @extend %cf;  

        //  tab
        //  ============================================================================================
        .tab {
            @include flex($align: center, $justify: center);

            align-self: flex-start;
            background: $grey-3;
            border-radius: 30px 30px 0 0;
            color: #fff;
            cursor: pointer;
            padding: 1em 2em;
            pointer-events: all;
            position: relative;
            transform: rotate(-90deg);
            transform-origin: bottom right;
            white-space: nowrap;
            
            @media screen and (min-width : $break-large) {
                display: none;
            }

            //  shadow
            &::after {
                background: linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, #3e3e3e 100%);
                bottom: 0;
                content: "";
                height: 5px;
                left: 0;
                position: absolute;
                right: 0;
                z-index: 1;
            }
        }

        //  main "drawer" effect 
        //  ============================================================================================
        @media screen and (max-width: $switch-point) {
        	@include flex($justify: flex-end);

        	bottom: 0;
        	font-size: .8571428571428571rem;
        	height: 100vh;
        	// left: 0;
            pointer-events: none;
        	position: fixed;
        	right: 0;
            transform: translateX(100vw);     
            transition: all .4s;
            transition-delay: .1s;
        	top: 80px;    //  make sure this matches header height vs switch point
        	width: 200vw;
        	z-index: 997;

            @media screen and (min-width : $break-small) {
                transform: translateX(370px);               
            }

            @media screen and (min-width : $break-medium) {
                top: 100px;    //  make sure this matches header height vs switch point
                transform: translateX(500px);               
            }

            &.active {
                background: rgba(0, 0, 0, .5);
                backdrop-filter: blur(3px);
                transition: all .3s;
                transform: translateX(0vw);
            }

            //  the panel
            //  ========================================================================================
        	.side-panel-content {
        		background: #f6f6f6;
        		border-left: 5px solid $color-1;
        		margin: 0;
        		overflow: auto;
        		padding: 30px;
                pointer-events: all;
        		position: relative;
                transition: transform .3s;
        		width: 100vw;

                @media screen and (min-width : $break-small) {
                    width: 370px;               
                }

                @media screen and (min-width : $break-medium) {
                    width: 500px;               
                }
            }

        		//  close
        		//	====================================================================================
        		.close {
        			@include flex($align: center, $justify: center);

        			border-radius: 100%;
        			cursor: pointer;
        			margin: 0;
        			padding: 1em;
        			position: absolute;
        			right: 30px;
        			top: 30px;
        			
        		    &:hover {
        		        transform: rotate(-90deg);
        		        transition: transform .2s;
        		    }
        		}

                //  heading
                //  ====================================================================================
                .heading {
                    @include flex($align: center, $justify: space-between);
                }

        		//  ctas
        		//	====================================================================================
        		.ctas {
        			@include flex($align: center, $justify: space-between);

        			bottom: 0;
        			height: 100px;
        			left: 40px;
        			position: absolute;
        			right: 40px;

        			input[type="submit"] {
        				margin: 0;
        			}
        		}
        }
    }	//  END
}




.side-panel-enter,
.side-panel-leave-to {
	opacity: 0;

}
.side-panel-enter {
	.side-panel-content {
		transform: translateX(50vw);
	}
}
.side-panel-enter-to {
	transition: .4s;

	.side-panel-content {
		transform: translateX(0vw);
    	transition: all .4s;
	}
}

.side-panel-leave-active {
	transition: .4s;

	.side-panel-content {
		transform: translateX(0vw);
    	transition: all .4s;
	}
}

.side-panel-leave-active {
    transition-delay: .2s;
}

.side-panel-enter-to,
.side-panel-leave {
	opacity: 1;
}




//  make available
//  ====================================================================================================
@include side-panel();
