<template>
	<header :class="componentName">
        <nuxt-link
            class="apex-suite-logo"
            to="/"
            title="Return to the dashboard"
        >
            <component v-bind:is="logo" />
        </nuxt-link>

        <div class="account">
            <icon-apex-shard />

            <p>
                Welcome back 
                <strong>[User Name]</strong>
                <br>
                [company name]
            </p>

            <icon-chevron-down />

            <ul class="acount-dropdown">
                <nuxt-link
                    tag="li"
                    to="/profile/"
                    alt="Go to your account"
                >
                    Your profile
                </nuxt-link>
                <li @click="toggleVisible()">Switch domain</li>
                <li>Apex support</li>
                <li>Sign out</li>
            </ul>
        </div>

        <img 
            class="account-pic"
            src="https://www.nexuspoint.co.uk/assets/img/logo.svg"
            alt="[COMPANY] logo"
        >

        <button 
            v-if="showSuite"
            class="no-style suite-trigger"
            @click="toggleSuite()"
        >
            APEX

            <icon-chevron-down />
        </button>


        <!-- show and link to the full apex suite -->
        <transition 
            name="site-header-suite" 
            @after-enter="toggleTransition"
        >
            <aside 
                v-if="isSuiteVisible"
                class="suite"
            >
                <nav role="navigation">
                    <button
                        class="no-style close-list"
                        @click="toggleTransition()"
                    >
                        <span hidden>Close Apex Suite list</span>  
                        <icon-menu-close />  
                    </button>
                    
                    <transition 
                        name="site-header-suite-list"
                        @after-leave="toggleSuite"
                    >
                        <ul v-if="hasTransitionFinished">
                            <nuxt-link
                                tag="li"
                                to="/" 
                                class="home"
                                data-aos="fade-left" 
                                data-aos-delay="100"
                            >
                                <span hidden>Go to core/dashboard</span>
                                <icon-apex-menu />
                            </nuxt-link>
                            <nuxt-link
                                tag="li"
                                to="/dms" 
                                class="dms"
                                data-aos="fade-left" 
                                data-aos-delay="150"
                            >
                                <span hidden>Go to your Dealer management app</span>
                                <icon-dms />
                            </nuxt-link>
                            <nuxt-link
                                tag="li"
                                to="/cms" 
                                class="cms"
                                data-aos="fade-left" 
                                data-aos-delay="200"
                            >
                                <span hidden>Go to your Content management system app</span>
                                <icon-cms />
                            </nuxt-link>
                            <nuxt-link
                                tag="li"
                                to="/crm" 
                                class="crm"
                                data-aos="fade-left" 
                                data-aos-delay="250"
                            >
                                <span hidden>Go to your Customer relations management app</span>
                                <icon-crm />
                            </nuxt-link>
                            <nuxt-link
                                tag="li"
                                to="/doc" 
                                class="doc"
                                data-aos="fade-left" 
                                data-aos-delay="300"
                            >
                                <span hidden>Go to your Daily onboarding costs app</span>
                                <icon-doc />
                            </nuxt-link>
                        </ul>
                    </transition>
                </nav>
            </aside>
        </transition>
	</header>
</template>




<script>
    export default {
        name: "siteHeader",
        props: {
        	componentName: {
        		default: "site-header",
        		type: String
        	},
            logo: {
                default: '',
                type: String
            },
            showSuite: {
                default: true,
                type: Boolean
            }
        },
        data() {
            return {
                isSuiteVisible: false,
                hasTransitionFinished: false
            }
        },
        methods: {
            toggleSuite() {
                this.hasTransitionFinished = false;
                this.isSuiteVisible =! this.isSuiteVisible;
            },
            toggleTransition() {
                this.hasTransitionFinished =! this.hasTransitionFinished;
            },
        }
    }
</script>