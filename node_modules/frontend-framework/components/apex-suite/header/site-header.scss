/*
    title:  site-header
    author: rob@nexuspoint.co.uk
    notes:

======================================================================================================================================================================================================== */




//  component wrapper
//  ====================================================================================================
@mixin site-header(
    $componentName: "site-header",

    $background: $grey-4
) {
    $color-dms: #FF677D !default;
    $color-crm: #B56DFF !default;
    $color-doc: #FFC200 !default;
    $color-cms: #3E79FE !default;
    $color-bot: #21C8EA !default;
    $full-size: 100px;
    $reduced-size: 80px;


    .#{$componentName} {
        @extend %cf;
        @include flex($align: stretch, $justify: flex-start);

        background: $background;
        color: contrast($background, 42, #fff, #000);
        font-size: .857rem;
        height: $reduced-size;
        position: sticky;
        top: 0;
        z-index: 900;

        @media screen and (min-width: $break-medium) {
            height: $full-size;
        }




        //  TEST ANIMATE TRANSITION ON LOGO
        // .animate {
        //     .shard {
        //         animation: logo .8s forwards;
        //         transform-origin: top right;

        //         &[fill^="#"] {
        //             fill: #B4D234 !important;
        //             transition: .3s;
        //             transition-delay: .2s;
        //         }

        //         &[stroke^="#"] {
        //             stroke: #B4D234 !important;
        //             transition: .3s;
        //             transition-delay: .2s;
        //         }
        //     }

        //     .words {
        //         animation: words .8s forwards;
        //         fill: #B4D234 !important;
        //         transition: .3s;
        //         transition-delay: .2s;
        //     }
        // }



        // @-webkit-keyframes logo {
        //     0% {
        //         opacity: 1;
        //         transform: translate3d(0px, 0px, 0px);

        //     }

        //     25% {
        //         opacity: 0;
        //         transform: translate3d(20px, 40px, 0px);
        //     }

        //     75% {
        //         opacity: 0;
        //         transform: translate3d(-20px, -20px, 0px);
        //     }

        //     100% {
        //         opacity: 1;
        //         transform: translate3d(0px, 0px, 0px);
        //     }
        // }
        // @-webkit-keyframes words {
        //     0% {
        //         opacity: 1;
        //         transform: translateY(0px);

        //     }

        //     25% {
        //         opacity: 0;
        //         transform: translateY(20px);
        //     }

        //     75% {
        //         opacity: 0;
        //         transform: translateY(-20px);
        //     }

        //     100% {
        //         opacity: 1;
        //         transform: translateY(0px);
        //     }
        // }




        //  logo
        //  ============================================================================================
        .apex-suite-logo {
            align-self: center;     //  header parent @ stretch
            margin: auto auto auto calc(#{$reduced-size} + 20px);
            width: 95px;

            @media screen and (min-width: $break-medium) {
                margin: auto auto auto calc(#{$full-size} + 30px);
            }
        }


        //  account
        //  ============================================================================================
        .account {
            @include flex($align: center, $justify: space-between);

            cursor: pointer;
            padding: 0 0 0 120px;    //  left = for the svg
            position: relative;
            text-align: right;

            @media screen and (max-width: $break-medium) {
                display: none;
            }

            //  on hover animate the dropdown
            &:hover {
                .acount-dropdown {
                    opacity: 1;
                    pointer-events: all;
                    transform: translateY(0);
                    transition: .3s;

                    &:before {
                        opacity: 1;
                        transform: rotate(-45deg);
                        transition: .3s;
                        transition-delay: .3s;
                    }
                }
            }

            p {
                padding: 0;
                z-index: 1;
            }
                .icon-chevron-down {
                    @include set-icon-color(#fff);

                    margin-left: 1em;
                }

            .icon-apex-shard {
                @include set-icon-color($grey-3);

                height: 100%;
                left: 0;
                position: absolute;
                top: 0;
                width: auto;
            }
         }
            .account-pic {
                align-self: center;     //  header parent @ stretch
                background-color: #fff;
                height: auto;
                margin: auto 20px;
                width: 60px;

                @media screen and (max-width: $break-medium) {
                    display: none;
                }
            }

            .acount-dropdown {
                background-color: $grey-3;
                left: 120px;    //  this accounts for padding on parent (used for the pointy svg)
                opacity: 0;
                pointer-events: none;
                position: absolute;
                right: 0;
                text-align: left;
                transition: .4s;
                transform: translateY(-100px);
                top: 100%;
                z-index: 2;

                &:before {
                    background-color: $grey-4;
                    content: "";
                    height: 20px;
                    opacity: 0;
                    position: absolute;
                    right: 2em;
                    transform: rotate(-45deg);
                    top: -10px;
                    width: 20px;
                }

                li {
                    border-bottom: 1px solid $grey-4;
                    border-right: 5px solid transparent;
                    border-left: 5px solid transparent;
                    padding: 1em 1.5em;
                    transition: .4s;

                    &:hover {
                        border-left-color: $color-1;
                        transition: .3s;
                    }
                }
            }


        //  suite trigger
        //  ============================================================================================
        .suite-trigger {
            @include flex($align: center, $dir: column, $justify: center);

            background: $grey-3;
            border-top: 4px solid transparent;
            border-bottom: 4px solid $grey-3;
            color: contrast($grey-3, 45, #fff, #000);
            cursor: pointer;
            font-weight: 900;
            height: 100%;
            position: relative;
            width: $reduced-size;

            &:hover {
                background: transparent;
            }

            @media screen and (min-width: $break-medium) {
                width: $full-size;
            }

            .icon {
                @include set-icon-color(#fff);

                margin-top: 1em;
                width: .75em;
            }
        }




        //  suite trigger
        //  ============================================================================================
        .suite {
            background-color: $grey-3;
            min-height: 100vh;
            overflow: hidden;
            position: absolute;
            right: 0;
            top: 0;
            width: $reduced-size;
            z-index: 999;

            @media screen and (min-width: $break-medium) {
                width: $full-size;
            }

            li,
            .close-list {
                @include flex($align: center, $justify: center);

                background-color: $background;
                cursor: pointer;
                height: $reduced-size;
                margin-bottom: 1px;
                width: $reduced-size;

                @media screen and (min-width: $break-medium) {
                    height: $full-size;
                    width: $full-size;
                }
            }
                li {
                    border-bottom: 3px solid transparent;
                    transition: .4s;

                    &:hover {
                        background-color: transparent;
                        transition: .3s;

                        &.home {
                            border-color: #fff;

                            .icon {
                                @include set-icon-color(#fff);
                            }
                        }
                        &.cms {
                            border-color: $color-cms;

                            .icon {
                                @include set-icon-color($color-cms);
                            }
                        }
                        &.crm {
                            border-color: $color-crm;

                            .icon {
                                @include set-icon-color($color-crm);
                            }
                        }
                        &.dms {
                            border-color: $color-dms;

                            .icon {
                                @include set-icon-color($color-dms);
                            }
                        }
                        &.doc {
                            border-color: $color-doc;

                            .icon {
                                @include set-icon-color($color-doc);
                            }
                        }
                    }
                }

                //  app package icons, make same size
                ul {
                    .icon {
                        height: auto;
                        width: 50px;
                    }

                    .icon-apex-menu {
                        width: 30px;
                    }
                }

                .aos-animate:hover {
                    transition-delay: 0s !important;    //  aos delay still active
                }

            .close-list {
                background: transparent;
                border-top: 4px solid transparent;
                border-bottom: 4px solid $grey-3;
                margin: 0;
                padding: 0;

                &:hover {
                    background: transparent;
                    border-bottom: 2px solid $grey-3;   //  uneven border due to border on li
                    transform: rotate(90deg);
                }

                .icon {
                    @include set-icon-color(#fff);

                    &:active {
                        transform: scale(.5);
                        transition: .1s;
                    }
                }
            }
        }
    }   //  END
}




//  temp
.fade-enter-active,
.fade-leave-active {
    transition: .2s;
}
.fade-enter,
.fade-leave-to {
    opacity: 0;
}
.fade-enter-active { transition-delay: .2s }




.site-header-suite-enter-active,
.site-header-suite-leave-active {
    transition: .3s;
}
.site-header-suite-enter,
.site-header-suite-leave-to {
    opacity: 0;
    transform: translateY(-100vh);
}
.site-header-suite-enter-active { transition-delay: .2s }




.site-header-suite-list-enter-active,
.site-header-suite-list-leave-active {
    transition: .3s;
}
.site-header-suite-list-enter,
.site-header-suite-list-leave-to {
    opacity: 0;
    transform: translateX(100px);
}




//  make available
//  ====================================================================================================
@include site-header();
