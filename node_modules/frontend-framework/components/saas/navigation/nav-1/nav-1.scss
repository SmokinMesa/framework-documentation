/*
    title:  nav-1
    author: kelly@nexuspoint.co.uk
    notes:

========================================================================================================================================================================================================  */




//  component wrapper
//  ====================================================================================================
@mixin nav-1(
    $componentName: "nav-1",

    $header-bg: #fff,
    $header-top-bg: contrast($header-bg, $returnDark: darken($header-bg, 4%), $returnLight: lighten($header-bg, 10%)),
    $icon-colour: contrast($header-bg, $returnDark: 'black', $returnLight: 'white'),
) {
    ##{$componentName} {
    	background: $header-bg;
    	position: relative;

    	//  header-top
		//  ============================================================================================
		.header-top {
			@include flex($justify: flex-end);

			font-size: 0.857em;

			@media screen and (min-width: $break-medium ) {
				@include flex($justify: space-between);
			}
		}

			//  location
			//  ========================================================================================
			#location {
				@include flex();

				color: contrast($header-bg, $returnDark: #000, $returnLight: #fff);
				flex-grow: 1;

				@media screen and (min-width: $break-medium ) {
					flex-grow: 0;
					width: 21.428571428571427rem;
				}

				//  location & franchise selects
				//  ====================================================================================
				.select-wrapper {
					@include flex($align: center);

					flex-basis: 50%;
					margin-right: 2px;
					position: relative;

					select {
						background: $header-top-bg;
						border: 0;
						border-radius: 0;
						color: inherit;
						cursor: pointer;
						font-size: 1em;
						height: 100%;
						padding: 0 0 0 2em;
						width: 100%;
					}

					.icon {
						@include set-icon-color(contrast($header-top-bg));

						height: 10px;
						pointer-events: none;
						position: absolute;
						right: 2em;
					}
				}
			}

			//  social
			//  ========================================================================================
			.social {
				@include flex($dir: row);

				flex-grow: 0;
				margin-bottom: -2px;
				position: relative;

				@media screen and (min-width: $break-medium ) {
					flex-grow: 1;
					margin-bottom: 0;

					&::before {
						background: $header-top-bg;
						content: '';
						display: block;
						height: 100%;
						flex-grow: 1;
					}
				}

				//  social toggle
				//  ====================================================================================
				.social-nav-toggle {
					@media screen and (min-width: $break-medium ) {
		  				display: none !important;
		  			}

					//  icon
					//  ================================================================================
					&::after {
						@include icon-pack($icon-share, $icon-colour);

						height: 1.5em;
		                min-width: 1.5em;
		                width: 1.5em;
		  			}
				}

				//  social menu
				//  ====================================================================================
				.social-nav {
					//  mobile only
					//  ================================================================================
					@media screen and (max-width: $break-medium ) {
						@include flex($dir: column);

						display: none;
						position: absolute;
						right: 0;
						top: 52px;
						z-index: 5;

						&.active {
							display: inherit;
						}
					}

					//  above mobile
					//  ================================================================================
					@media screen and (min-width: $break-medium ) {
						@include flex($dir: row);

						position: relative;
		  			}
		  		}

					//  social menu items & toggle
					//  ================================================================================
					a,
					.social-nav-toggle {
						@include flex($justify: center, $align: center);

						background-color: $header-top-bg;
						height: 50px;
						margin-bottom: 2px;
						margin-left: 0;
						overflow: hidden;
						position: relative;
						text-decoration: none;
						width: 50px;

						@media screen and (min-width: $break-medium ) {
							margin-bottom: 0;
							margin-left: 2px;
						}

						//  hover animation
						//  ============================================================================
						&::before {
							border: 1px solid $color-1;
							border-radius: 50%;
							content: "";
							position: absolute;
							transform: scale(0);
							z-index: 1;
							transition: transform .4s;
						}

						&:hover {
							&::before {
								transform: scale(40);
								transition: transform .2s;
							}

							.icon {
								@include set-icon-color(contrast($color-1));	//  match to &::before ^

								transition: transform .2s;
							}
						}
					}

						//  icons
						//  ============================================================================
						.icon {
							@include set-icon-color(contrast($header-top-bg));

							z-index: 1;
						}
			}




		//  header-bottom
		//  ============================================================================================
		.header-bottom {
			@include flex($justify: space-between, $align: center);

			color: contrast($header-bg, $returnDark: $body-color, $returnLight: #fff);
			padding: 0 0 0 1.0714285714285714rem;

			@media screen and (min-width: $break-medium ) {
				@include flex($justify: space-between, $align: stretch);

				padding: 0 2.857142857142857rem;
			}
		}

			//  logo
			//  ========================================================================================
			.logo {
				margin: 1.0714285714285714rem 0;
				max-height: 110px;
				min-height: 30px;
			}

			//  mobile-nav-toggle
			//  ========================================================================================
			.mobile-nav-toggle {
				cursor: pointer;
				font-size: 2em;
				height: 2em;
				position: relative;
				right: 0;
				top: 0;
				width: 2em;
				z-index: 3;

				//  don't display on desktop
				//  ====================================================================================
				@media screen and (min-width: $break-medium ) {
	  				display: none;
	  			}

	  				//  menu icon
					//  ================================================================================
					&:before {
						@include icon-pack($icon-menu, $icon-colour);

					  	position: absolute;
					  	right: 20%;
					  	top: 20%;
					  	transition: background-image 4s ease-in-out;
					}

				//  close icon
				//  ====================================================================================
				&.close {
					position: absolute;
					right: 20px;
					top: 20px;
					z-index: 4;

					&:before {
						@include icon-pack($icon-close, $icon-colour);

						position: absolute;
					  	right: 20%;
					  	top: 20%;
					}
				}
			}


			//  nav
			//  ========================================================================================
			nav {
				background-color: $header-bg;
				bottom: 0;
				display: block;
				font-size: 1rem;
				overflow: auto;
				padding-top: 6em;
				position: fixed;
				right: 0;
				transform: translateX(100vw);
				transition: transform .4s;
				top: 0;
				width: 100vw;
				z-index: 3;

				@media screen and (min-width : $break-medium ) {
					@include flex($justify: center);

					background-color: transparent;
					overflow: visible;
					padding-top: 0;
					position: relative;
					transform: translateX(0);
					width: 100%;
				}

				//  main nav & overflow nav
				//  ====================================================================================
				.main-nav,
				.overflow-nav {
					//  menu items
					//  ================================================================================
					li {
						color: inherit;
						display: block;
		            	position: relative;

			        	a {
			        		@include flex($justify: center, $align: center);

			        		color: inherit;
			        		padding: 1em 2em;
			        		text-decoration: none;
			        		white-space: nowrap;

			        		@media screen and (min-width: $break-medium ) {
			        			@include flex($justify: flex-start, $align: center);
			        		}

			                //  active & hover states
							//  ========================================================================
			                &.active {
			                	font-weight: 600;
			                }

			                &:hover,
			                &.active {
			                	color: $color-1;
			                }
			            }

			            //  nested navs
						//  ============================================================================
						.nested-nav {
							font-size: .9em;

							&:before {
								background: $header-bg;
								height: 10px;
								width: 10px;
							}

							@media screen and (min-width: $break-medium ) {
								pointer-events: none;
								z-index: 2;
							}

							//  dont-display underline animation
							//  ========================================================================
							li a {
								padding: 1em 2em;

								&::after {
									display: none;
								}
							}
						}
			        }
			    }

			    //  main nav only
				//  ====================================================================================
				.main-nav {
					width: 100%;

					@media screen and (min-width: $break-medium ) {
						@include flex($align: stretch, $justify: flex-end);
					}

					li {
						//  show nested-nav
						//  ============================================================================
	            		&:hover {
	            			.dropdown:before {
	            				transform: rotate(180deg);
	            			}

				        	.nested-nav {
				        		opacity: 1;
				        		pointer-events: auto;
				        		transform: translateY(0);
				        	}
				        }

				        //  a
						//  ============================================================================
				        a {
				        	@media screen and (min-width: $break-medium ) {
		                    	height: 100%;
			        			padding: 0 1em;

			                    //  underline animation
								//  ====================================================================
				                &::after {
				                	background-color: inherit;
				                	bottom: 0;
				                	content: "";
				                	display: flex;
				                	height: 5px;
				                	left: 0;
				                	justify-content: center;
				                	position: absolute;
				                	right: 0;
				                	transform: scale(0);
				                	transition: .3s;
				                	width: 100%;
				                }
			            	}

			            	//  hover
							//  ========================================================================
			            	&:hover,
			                &.active {
			                	&::after {
			                		background-color: $color-1;
			                		transform: scale(1);
			                    	transition: .2s;
			                	}
			                }
				        }
					}

					//  li.dropdown
					//  ================================================================================
					.dropdown {
						@media screen and (min-width: $break-medium ) {
							margin: 0 1em 0 0;
							position: relative;
							padding: 0 2em 0 1em;

							&::before {
								@include icon-pack($icon-chevron-down, $icon-colour);

								height: 10px;
								pointer-events: none;
								position: absolute;
								right: 0;
							}
						}
					}

					//  main-nav > nested-nav
					//  ================================================================================
					.nested-nav{

						@media screen and (min-width: $break-medium ) {
							background: $header-bg;
							border: 1px solid $global-border-color;
							border-radius: $global-border-radius;
							box-shadow: 0 4px 22px 0 rgba(0, 0, 0, 0.2);
							min-width: 208px;
							opacity: 0;
							padding: 1em 0;
							position: absolute;
							right: 0;
							top: 90%;
							transform: translateY(100px);
							transition: .4s;

							&:before {
								background: $header-bg;
								border-radius: 0;
								border-left: 1px solid $global-border-color;
								border-top: 1px solid $global-border-color;
								box-shadow: -2px -3px 4px 0 rgba(0,0,0,0.1);
								content: '';
								display: block;
								height: 10px;
								position: absolute;
								right: 20px;
								top: -6px;
								transform: rotate(45deg);
								width: 10px;
								z-index: 2;
							}
						}
					}
				}

				//  nav-overlow-toggle
				//  ====================================================================================
			    .overflow-nav-toggle {
			    	position: relative;

			    	&::after {
			    		display: none;
			    	}

			    	@media screen and (min-width: $break-medium ) {
	            		@include flex($align: center);

	            		padding-right: 1em;
				    	position: relative;
				    	text-decoration: none;

				    	&::after {
		            		@include icon-pack($icon-more, $icon-colour);

		            		display: block;
		            	}

		            	//  on hover show overflow-nav
						//  ============================================================================
		            	&:hover {
							.overflow-nav {
								opacity: 1;
				        		pointer-events: auto;
				        		right: 0;
				        		transform: translateY(0);

				        		.nested-nav {
				        			pointer-events: auto;
				        		}
							}
						}
	            	}
	            }

				//  overflow-nav only
				//  ====================================================================================
			    .overflow-nav {
			    	position: relative;

			    	@media screen and (min-width: $break-medium ) {
						background: $header-bg;
						border: 1px solid $global-border-color;
						border-radius: $global-border-radius;
						box-shadow: 0 4px 22px 0 rgba(0, 0, 0, 0.2);
						opacity: 0;
						padding: 1em 0;
						pointer-events: none;
						position: absolute;
						right: 0;
						top: 90%;
						transform: translateY(100px);
						transition: .4s;
						z-index: 2;
						min-width: 208px;

						&:before {
							background: $header-bg;
							border-radius: 0;
							border-left: 1px solid $global-border-color;
							border-top: 1px solid $global-border-color;
							box-shadow: -2px -3px 4px 0 rgba(0,0,0,0.1);
							content: '';
							display: block;
							height: 10px;
							position: absolute;
							right: 20px;
							top: -6px;
							transform: rotate(45deg);
							width: 10px;
							z-index: 2;
						}

						.nested-nav li a {
							margin-left: 1em;
						}
					}
			    }
			}

			//  open nav on mobile
			//  ========================================================================================
			nav.active {
				@media screen and (max-width: $break-medium ) {
					display: block;
					transform: translateX(0);
				}
			}
	}
}


.slide-in-enter-active,
.slide-in-leave-active {
	transition: all .3s;
}

.slide-in-enter,
.slide-in-leave-active {
	transform: translateX(-100vw);
	opacity: 0;
}

//  instantiate
//  ====================================================================================================
@include nav-1();
