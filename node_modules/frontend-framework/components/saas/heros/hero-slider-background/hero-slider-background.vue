<template>
	<div :class="componentName" @mouseover="timerPause()" @mouseleave="timerPlay()">
		<div class="slide">
			<transition name="carousel-img" mode="in-out">
				<img class="main" :src="slides[currentSlide].imgUrl" :alt="slides[currentSlide].imgAlt" :key="currentSlide">
			</transition>

			<div class="content">
				<div class="sw">
					<div class="col-8 center">
						<slot></slot>
					</div>
				</div>
			</div>
		</div>

        <ul class="nav">
            <li :class="{ 'disabled' : this.currentSlide == 0 }" class="prev" @click="scrollSlide('prev')">
            	<icon-chevron-left />
                <span hidden>View previous image</span>
            </li>

            <li v-for="(dot, index) of slides" class="slide-indicator" :class="{ 'active' : index == currentSlide }" @click="scrollSlide(index)">
            	<span hidden>View slide {{ index }}</span>
            </li>

            <li :class="{ 'disabled' : this.currentSlide == (this.slides.length -1) }" class="next" @click="scrollSlide('next')">
            	<icon-chevron-right />
                <span hidden>View next image</span>
            </li>
        </ul>
	</div>
</template>




<script>
	export default {
		name: 'HeroSliderBackground',	
		props: {
			componentName: {
				default: 'hero-slider-background',
				type: String
			},
			slides: {
				default: () => [
					{
						imgUrl: "https://images.unsplash.com/photo-1511576661531-b34d7da5d0bb?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80",
						imgAlt: "Image 1 alt text",
					},
					{
						imgUrl: "https://images.unsplash.com/photo-1504350274292-13f3a028f36b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1339&q=80",
						imgAlt: "Image 2 alt text",
					},
					{
						imgUrl: "https://images.unsplash.com/photo-1476067897447-d0c5df27b5df?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80",
						imgAlt: "Image 4 alt text",
					}
				],
				type: Array
			},
			timeBetweenSlides: {
				default: 4000,
				type: Number
			},
			autoScroll: {
				default: true,
				type: Boolean
			}
		},
		data() {
			return {
				currentSlide: 0, 
				timerActivated: false,
				interval: null
			}
		},
		mounted() {
			if (this.autoScroll) {
				this.timerPlay();
			}
		},
		computed: {
			currentTabComponent() {
				return this.slides[this.currentSlide].component;
			}
		},
        methods: {
			timerPlay() {
				if (this.autoScroll) {
					this.timerActivated = true;

					var that = this;
					this.interval = setInterval(function () {
						that.tempTimer++;

						if (that.currentSlide < (that.slides.length - 1)) {
							that.currentSlide++;

							that.scrollSlide(that.currentSlide);
						}
						else if (that.currentSlide == (that.slides.length - 1)) {
							that.currentSlide = 0;
						}
					}, that.timeBetweenSlides);
				}
			},
			timerPause() {
				this.timerActivated = false;
				
				clearInterval(this.interval);
			},
            scrollSlide(dir) {
                if (dir == 'prev' && this.currentSlide > 0) {
                    this.currentSlide = this.currentSlide -= 1;
                } 
                else if (dir == 'next' && this.currentSlide < (this.slides.length - 1)) {
                    this.currentSlide = this.currentSlide += 1;
                } 
                else if (typeof dir === 'number') {
                	this.currentSlide = dir;
                }
            }
        }
	}
</script>