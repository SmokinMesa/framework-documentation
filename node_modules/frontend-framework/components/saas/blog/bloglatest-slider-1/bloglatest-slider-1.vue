<template>
	<section :class="componentName">
		<div class="sw">
			<header class="main-header">
				<h1>Latest posts</h1>

				<a class="button outline" href="/blog">View all posts</a> 
			</header>

			<aside class="carousel-container">
				<article class="blog-card">
					<a class="col-8 img-container" :href="`/blog/${blog[currentPost].page_slug}`">
						<img :src="`${ blog[currentPost].contents.main_image }`" :alt="`${ blog[currentPost].page_title }`">
					</a>

					<div class="col-4 content">
						<h1 class="post-title">
							<a :href="`/blog/${blog[currentPost].page_slug}`">{{ blog[currentPost].page_title }}</a>
						</h1>

						<a class="post-category" :href="`/blog/${ blog[currentPost].category }`">{{ blog[currentPost].category }}</a>

						<a class="post-intro" :href="`/blog/${blog[currentPost].page_slug}`">{{ blog[currentPost].contents.introduction }}</a>

						<footer class="blog-card-footer">
							<div>
								<a class="post-author" :href="`/blog/author/${blog[currentPost].author.slug}`">
									<img class="avatar" src="http://i.pravatar.cc/30" alt="`Avatar for ${ blog.author.first_name + blog.author.last_name }`"></img>
									by {{ blog[currentPost].author.first_name + ' ' + blog[currentPost].author.last_name }}
								</a>

								<a class="read-more" :href="`/blog/${blog[currentPost].page_slug}`">Read full article</a>
							</div>

							<time class="time-posted">{{ blog[currentPost].published_at.date  | formatBlogTime }}</time>
						</footer>
					</div>
				</article>

				<nav>
					<ul>
						<li :class="{ 'disabled' : currentPost === 0 }" class="prev" @click="currentPost--">
							<span class="accessible" data-hidden="true">View previous post</span>
						</li>

						<li :class="{ 'disabled' : currentPost === blog.length - 1 }" class="next" @click="currentPost++">
							<span class="accessible" data-hidden="true">View next post</span>
						</li>
						
						<li v-for="(post, index) in blog" :class="{ 'active' : index === currentPost }" class="slide-indicator" @click="currentPost = index">
			            	<span class="accessible" data-hidden="true">View slide</span>
			            </li>
					</ul>
				</nav>
			</aside>	
		</div>
	</section>
</template>




<script>
	export default {
		name: 'Bloglatest-slider-1',
		props: {
			componentName: {
				default: 'bloglatest-slider-1',
				type: String
			}
		},
		data() {
			return {
				currentPost: 0,
				blog: [
					{	
						author: {
							first_name: "Steve",
							last_name: "Smith",
							slug: "steve-smith"
						},
						category: "Reviews",
						contents: {
							introduction: "It’s been an exciting time at Autostore. Our showroom at Penrith is going from strength to strength and we’re now beginning to welcome lots of happy customers to our new site in Lancaster.",
							main_image: "https://images.unsplash.com/photo-1471174617910-3e9c04f58ff5?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=092cd4f8bbc80ac2395d2debfac73df4&auto=format&fit=crop&w=1350&q=80"
						},
						page_slug: "easy-car-buying-with-the-new-autostore-website",
						page_title: "Malesuada ultricies arcu non dictum sapien moillis ullamcorper pellentesque convallis ex at volutpat lore…",
						published_at: {
							date: "2019-01-10 14:56:00.000000"
						}
					},
					{	
						author: {
							first_name: "Steve",
							last_name: "Smith",
							slug: "steve-smith"
						},
						category: "Reviews",
						contents: {
							introduction: "It’s been an exciting time at Autostore. Our showroom at Penrith is going from strength to strength and we’re now beginning to welcome lots of happy customers to our new site in Lancaster.",
							main_image: "https://images.unsplash.com/photo-1448518340475-e3c680e9b4be?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1351&q=80"
						},
						page_slug: "easy-car-buying-with-the-new-autostore-website",
						page_title: "Malesuada ultricies arcu non dictum sapien moillis ullamcorper pellentesque",
						published_at: {
							date: "2019-01-10 14:56:00.000000"
						}
					},
					{	
						author: {
							first_name: "Steve",
							last_name: "Smith",
							slug: "steve-smith"
						},
						category: "Reviews",
						contents: {
							introduction: "It’s been an exciting time at Autostore. Our showroom at Penrith is going from strength to strength and we’re now beginning to welcome lots of happy customers to our new site in Lancaster.",
							main_image: "https://images.unsplash.com/photo-1471174617910-3e9c04f58ff5?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=092cd4f8bbc80ac2395d2debfac73df4&auto=format&fit=crop&w=1350&q=80"
						},
						page_slug: "easy-car-buying-with-the-new-autostore-website",
						page_title: "Easy Car Buying",
						published_at: {
							date: "2019-01-10 14:56:00.000000"
						}
					},
					{	
						author: {
							first_name: "Steve",
							last_name: "Smith",
							slug: "steve-smith"
						},
						category: "Reviews",
						contents: {
							introduction: "It’s been an exciting time at Autostore. Our showroom at Penrith is going from strength to strength and we’re now beginning to welcome lots of happy customers to our new site in Lancaster.",
							main_image: "https://images.unsplash.com/photo-1476067897447-d0c5df27b5df?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1350&q=80"
						},
						page_slug: "easy-car-buying-with-the-new-autostore-website",
						page_title: "Easy Car Buying",
						published_at: {
							date: "2019-01-10 14:56:00.000000"
						}
					}
				]
			}
		}
	}
</script>